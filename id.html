<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bong Bulletin ID Card Generator</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f3f3f3;
        text-align: center;
    }
    .form-box {
        background: #fff;
        padding: 15px;
        margin: 20px auto;
        border-radius: 8px;
        width: 360px;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .id-card {
        width: 360px;
        margin: 20px auto;
        background: #fff;
        position: relative;
        box-shadow: 0 0 8px rgba(0,0,0,0.3);
        overflow: hidden;
        border: 2px solid #b30000;
        padding-bottom: 20px;
    }
    .id-header {
        background: #b30000;
        color: white;
        padding: 6px;
        font-size: 24px;
        font-weight: bold;
    }
    .company {
        font-size: 20px;
        font-family: "Times New Roman", serif;
        font-weight: bold;
        color: #111;
    }
    .photo {
        width: 120px;
        height: 130px;
        background: #ddd;
        margin: 8px auto;
        border: 2px solid #000;
        object-fit: cover;
        display: block;
    }
    .info {
        text-align: center;
        font-size: 15px;
        margin: 8px 10px;
        font-weight: bold;
        line-height: 1.6em;
    }
    .barcode {
        width: 85%;
        display: block;
        margin: 10px auto;
    }
    .watermark {
        position: absolute;
        top: 150px;
        left: -40px;
        opacity: 0.07;
        font-size: 65px;
        transform: rotate(-35deg);
        color: #b30000;
        font-weight: 900;
        width: 500px;
        text-align: center;
        z-index: 0;
    }
    .terms-box {
        border: 1px solid #000;
        margin: 10px auto;
        width: 90%;
        font-size: 12px;
        padding: 5px;
        text-align: center;
        font-weight: bold;
        line-height: 1.4em;
    }
    .qrcode {
        width: 80px;
        display: block;
        margin: 10px auto;
    }
    .signatures {
        display: flex;
        justify-content: space-between;
        padding: 0 20px;
        margin-top: 10px;
        font-size: 12px;
        text-align: center;
    }
    .sign-box {
        border-top: 1px solid #000;
        width: 45%;
        padding-top: 3px;
    }
    #downloadBtn {
        display: none;
        padding: 8px 15px;
        background: #b30000;
        color: #fff;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        margin-top: 10px;
    }
</style>
</head>
<body>

<div class="form-box">
    <h2>Generate Bong Bulletin ID</h2>
    <form id="idForm">
        <input type="file" id="photoUpload" accept="image/*" required><br><br>
        <input type="text" id="name" placeholder="Full Name" required><br><br>
        <select id="designation">
            <option>Reporter</option>
            <option>HR</option>
            <option>Editor</option>
            <option>Intern</option>
            <option>Photographer</option>
        </select><br><br>
        <input type="date" id="dob" required><br><br>
        <input type="text" id="address" placeholder="Address" required><br><br>
        <input type="text" id="phone" placeholder="Phone" required><br><br>
        <input type="text" id="aadhaar" placeholder="Aadhaar Number" required><br><br>
        <input type="text" id="blood" placeholder="Blood Group" required><br><br>
        <button type="submit">Generate Card</button>
    </form>
</div>

<div id="cardContainer"></div>
<button id="downloadBtn">Download as PDF</button>

<script>
let serial = 1;
document.getElementById("idForm").addEventListener("submit", function(e){
    e.preventDefault();
    let name = document.getElementById("name").value;
    let designation = document.getElementById("designation").value;
    let dob = document.getElementById("dob").value;
    let address = document.getElementById("address").value;
    let phone = document.getElementById("phone").value;
    let aadhaar = document.getElementById("aadhaar").value;
    let blood = document.getElementById("blood").value;
    let idNum = "BB/C" + (200 + serial++) + "/2025"; 

    let reader = new FileReader();
    reader.onload = function(event){
        let photo = event.target.result;
        
        let cardHTML = `
        <div class="id-card" id="genCard">
            <div class="id-header">MEDIA</div>
            <div class="company">Bong Bulletin</div>
            
            <img src="${photo}" class="photo">
            
            <div class="info">
                Name: ${name}<br>
                Designation: ${designation}<br>
                ID No: ${idNum}<br>
                DOB: ${dob}<br>
                Address: ${address}<br>
                Phone: ${phone}<br>
                Aadhaar: ${aadhaar}<br>
                Blood Group: ${blood}
            </div>
            
            <img src="barcode.jpeg" class="barcode">

            <div class="terms-box">
                This identity card is property of Bong Bulletin<br><br>
                This card in to be carried by the employee at all the time on duty.<br><br>
                Any loss of or subsequent recovery of this card must be reported immediately to the editor in writing.<br><br>
                This card is to be surrendered on cessation of employee/freelance service. Any loss of or subsequent recovery of this card must be reported immediately.<br><br>
                This right of accreditation are personal and non-transferable.
            </div>

            <img class="qrcode" src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=https://ibb.co/fKCRkJg">

            <div class="signatures">
                <div class="sign-box">Signature of Card Holder</div>
                <div class="sign-box">Authorized Signatory</div>
            </div>
        </div>`;
        
        document.getElementById("cardContainer").innerHTML = cardHTML;
        document.getElementById("downloadBtn").style.display = "inline-block";
    };
    reader.readAsDataURL(document.getElementById("photoUpload").files[0]);
});

document.getElementById("downloadBtn").addEventListener("click", function(){
    let card = document.getElementById("genCard");
    html2canvas(card,{scale:2}).then(canvas=>{
        const { jsPDF } = window.jspdf;
        let pdf = new jsPDF("p","pt","a4");
        let imgData = canvas.toDataURL("image/png");
        let imgProps= pdf.getImageProperties(imgData);
        let pdfWidth = pdf.internal.pageSize.getWidth();
        let pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
        pdf.addImage(imgData,"PNG",20,20,pdfWidth-40,pdfHeight);
        pdf.save("BongBulletin_ID.pdf");
    });
});
</script>
</body>
</html>
